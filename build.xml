  <!-- ================== BACKUP ================== -->
  <target name="backup">
    <echo message="ðŸ“¦ Backing up API &amp; Product YAMLs with timestamp..."/>

    <tstamp>
      <format property="backup.timestamp" pattern="yyyyMMdd_HHmmss"/>
    </tstamp>

    <!-- Backup API -->
    <copy file="apis/${API_NAME}/${API_NAME}_${API_VERSION}.yaml"
          tofile="apis/${API_NAME}/${API_NAME}_${API_VERSION}_${backup.timestamp}.yaml"
          overwrite="false"/>

    <!-- Backup Product -->
    <copy file="products/${PRODUCT_NAME}/${PRODUCT_NAME}_${API_VERSION}.yaml"
          tofile="products/${PRODUCT_NAME}/${PRODUCT_NAME}_${API_VERSION}_${backup.timestamp}.yaml"
          overwrite="false"/>

    <echo message="âœ… Backup created: ${backup.timestamp}"/>

    <!-- Git commit and push backup -->
    <exec executable="git" dir="." failonerror="true">
      <arg value="add"/>
      <arg value="apis/${API_NAME}/${API_NAME}_${API_VERSION}_${backup.timestamp}.yaml"/>
      <arg value="products/${PRODUCT_NAME}/${PRODUCT_NAME}_${API_VERSION}_${backup.timestamp}.yaml"/>
    </exec>

    <exec executable="git" dir="." failonerror="true">
      <arg value="commit"/>
      <arg value="-m"/>
      <arg value="Backup API ${API_NAME}:${API_VERSION} and Product ${PRODUCT_NAME}:${API_VERSION} at ${backup.timestamp}"/>
    </exec>

    <exec executable="git" dir="." failonerror="true">
      <arg value="push"/>
      <arg value="origin"/>
      <arg value="main"/>
    </exec>
  </target>
